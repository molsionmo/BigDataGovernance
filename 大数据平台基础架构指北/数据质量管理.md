# 数据质量管理

## 元数据管理平台

元数据狭义的解释是用来描述数据的数据。广义来讲，除了业务逻辑直接读写处理的业务数据，其他所有用来位置整个系统运转所需的信息、数据都可以叫做元数据。

比如

* 表格的Schema信息
* 任务的学院关系
* 用户的脚本、任务的权限映射关系信息等

管理这些附加元数据信息的目的

* 一方面是为了让用户更高效地挖掘和使用数据
* 一方面是为了让平台管理人员更加有效地做好系统的维护管理工作

### 元数据管理平台管理什么

数据治理的第一步就是手机信息，元数据管理平台很重要的一个功能就是对元数据的收集、存储与查询展示。

收集的信息有以下几类

* 数据的表schema信息
* 数据的业务属性信息
  * 描述一张表的统计口径信息，这张表是干嘛的，各个字段的业务描述，业务标签，脚本逻辑历史变迁，变迁备注等等
* 数据的存储空间、权限归属和其他各类统计信息
  * 包括但不限于：数据占据了多少底层存储空间，最近是否有修改
  * 谁有权限管理和查看这些数据
  * 新增了多少表，删除了多少表，创建了多少分区之类的统计信息
* 数据的血缘关系信息
  * 简单来说，就是数据之间上下游来源去向关系，即数据从哪里来到哪里去，关系是什么
  * 以Hive为例，分析Hive脚本的执行计划，通常是可以定位出字段级别的数据血缘关系的，而如果是一个MapReduce任务，是需要通过分析MR任务输出的Log日志粗略判断目录级别的读写关系，从而推到数据的血缘依赖关系了

### 元数据管理系统方案

#### 一、Apache Atalas

#### 二、Cloudera Navigator Data Management

## DQC数据质量中心(Data Quality Center)

元数据管理平台主要从MetaData的角度，通过血缘跟踪、运行信息分析、业务语义分类、打标等方式来提升大数据开发平台的开发效率与数据质量。但仅通过对元数据的管理，并不能完全覆盖数据内容的正确性与及时性问题。元数据的管理，更多的是对宏观层面的业务语义和流程逻辑的监管。对于微观层面的数据质量问题，还需要针对数据内容自身进行监控和校验

### 阿里DQC数据质量中心

#### 质量保障原则

* 完整性
  * 完整性是指数据的记录和信息是否完整，是否存在数据缺失情况。例如，某个稳定业务的数据量每天约为100万条记录，某天突然下降了1万条，则可能是出现了记录缺失。例如，某科高考成绩表中，每个考卷分数都对应一个准考证号，当准考证号字段的空值数大于0时，则可能是出现了信息缺失。
* 准确性
  * 准确性是指数据中记录的信息和数据是否准确、是否存在异常或者错误的信息。例如，成绩单中分数出现负数或订单中出现错误的买家信息等，这些数据都是问题数据。确保记录的准确性也是保证数据质量必不可少的一部分。
* 一致性
  * 一致性通常体现在跨度很大的数据仓库中。 例如，某公司有很多业务数仓分支，对于同一份数据，在不同的数仓分支中必须保证一致性。例如，从在线业务库加工到数据仓库，再到各个数据应用节点，用户ID必须保持同一种类型，且长度也要保持一致。
* 及时性
  * 保障数据的及时产出才能体现数据的价值。例如，决策分析师通常希望当天就可以看到前一天的数据。若等待时间过长，数据失去了及时性的价值，数据分析工作将失去意义。

#### 数据风险点监控

##### 离线数据风险点监控

![离线数据风险点监控](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/189276/156203022645909_zh-CN.png)

* 数据准确性
  * DQC以数据集（DataSet）为监控对象，当离线MaxCompute数据发生变化时，DQC会对数据进行校验，并阻塞生产链路，以避免问题数据污染扩散。DQC还提供了历史校验结果的管理，方便数据质量的分析和定级。
  * 通过配置DQC的数据质量校验规则，可以实现在数据处理过程中进行自动的数据质量监控。DQC可以监控数据质量并报警，但它不对数据产出进行处理，需要报警接收人判断如何处理。
    * 强规则：一旦触发报警就会阻断任务的执行（将任务置为失败状态，使下游任务不会被触发执行）。
    * 弱规则：只报警但不阻断任务的执行。
* 数据的及时性

##### 在线数据风险点监控

待定

[阿里云在线数据质量配置功能](https://help.aliyun.com/document_detail/73767.html?spm=a2c4g.11186623.6.793.1a493eebco95m4)
